#!/bin/sh

name=retrosmart-openbox
themes=()

function makefile {

echo include makefile.mk

for i in $(cat src/theme.ini| grep -F [ | tr -d [ | tr -d ])
do
    test $i == DEFAULT && continue
    themes+=($name-$i)
    echo $name-$i:
    echo -e '\t'python src/mkobt.py -c 'src/theme.ini' -i 'src/pixmaps' -t $i -n '$(NAME)'
    themes+=($name-$i-clean)
    echo $name-$i-clean:
    echo -e '\t'python src/mkobt.py -c 'src/theme.ini' -i 'src/pixmaps' -t $i -n '$(NAME) -C'
done

echo '$(NAME)': ${themes[*]}

echo README.md: preview.png
echo -e '\t@echo ![retrosmart-preview]\(https://raw.githubusercontent.com/mdomlop/'$name'-themes/master/preview.png \"Retrosmart look\"\) > README.md'
echo -e '\n\t'@cat README '>>' README.md

echo AUTHORS.md:
echo -e '\t'@cat AUTHORS '>>' AUTHORS.md
echo INSTALL.md:
echo -e '\t'@cat INSTALL '>>' INSTALL.md

echo doc: AUTHORS.md INSTALL.md README.md
}

makefile > makefile
